---
title: "Exercise 1.4 - Managing Your New Resources"
workshops: azure_infra_ansible
workshop_weight: 14
layout: lab
---

:icons: font
:imagesdir: /workshops/azure_infra_ansible/images
:package_url: http://docs.ansible.com/ansible/package_module.html
:service_url: http://docs.ansible.com/ansible/service_module.html


= Exercise 1.4 - Managing Your New Resources

Congratulations!  You just wrote a playbook that allows you to create and manage Azure Infrastructure.
But what happens once that infrastructure is up? How do we manage and maintain it?

== Section 1 - Updating your host file

=== Step 1: Updating your host file
The first thing we are going to do is make some changes to the host file.

[source,bash]
----
cd ..
vi hosts
----

Inside of the host file we are going to be adding a new group and some variables to connect to your remote machine.

[source,bash]
----
localhost

[all:vars]
ansible_ssh_private_key_file=/home/azure-user/.ssh/id_rsa
ansible_port=22
ansible_user={{< urifqdn_azure_login "Student" >}}

[web]
{{< urifqdn_azure_vm "Student" "vm1" >}}
----

=== Step 2: Run your playbook
Run your playbook, using the following command.

[source,bash]
----
ansible-playbook -i ../hosts site.yml --private-key=~/.ssh/{{< span2 "prefix" "example" "-tower" >}}
----

== Section 2: Review

If successful, you should see standard output that looks very similar to the following.  If not, just let us
know.  We'll help get things fixed up.

image::stdout_2.png[caption="Figure 1: ", title="apache-basic-playbook stdout"]

{{< importPartial "footer/footer_azure.html" >}}
